using com.apamax.plugins.Filesystem;

monitor test
{
	action onload()
	{
		string entry;
		sequence<string> entries := Filesystem.ls("");
		if (entries.size() = 0) {
			log "Directory should have entries" at ERROR;
		}
		for entry in entries {
			log entry;
		}

		Filesystem.mkdir("my_new_dir");
		entries := Filesystem.ls("");
		if (entries.indexOf("my_new_dir") = -1) {
			log "my_new_dir not found in current directory" at ERROR;
		}


		entries := Filesystem.ls("my_new_dir");
		if (entries.size() != 0) {
			log "Directory should not have entries" at ERROR;
		}
		Filesystem.rmdir("my_new_dir");

		log "Test finished";
	}
}
